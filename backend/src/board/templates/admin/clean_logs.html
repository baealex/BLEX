{% extends "admin/base_site.html" %}
{% load static %}

{% block content %}
<div id="content-main">
    <div class="breadcrumbs">
        <a href="{% url 'admin:utility_dashboard' %}">ìœ í‹¸ë¦¬í‹° ê´€ë¦¬</a> &rsaquo; ë¡œê·¸ ì •ë¦¬
    </div>
    
    <h1>ğŸ“‹ ë¡œê·¸ ì •ë¦¬</h1>
    
    {% if not result %}
    <form method="post" class="module aligned">
        {% csrf_token %}
        
        <div class="help">
            <h3>â„¹ï¸ ë¡œê·¸ ì •ë¦¬ ì•ˆë‚´</h3>
            <p>Django ê´€ë¦¬ì í™œë™ ë¡œê·¸ë¥¼ ëª¨ë‘ ì‚­ì œí•©ë‹ˆë‹¤. ì´ ì‘ì—…ì€ ë°ì´í„°ë² ì´ìŠ¤ ìš©ëŸ‰ì„ ì ˆì•½í•˜ì§€ë§Œ, ê´€ë¦¬ìì˜ ê³¼ê±° í™œë™ ë‚´ì—­ì„ í™•ì¸í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.</p>
            <p><strong>âš ï¸ ì£¼ì˜:</strong> ì‚­ì œëœ ë¡œê·¸ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>
        
        <div class="submit-row" style="display: flex; gap: 10px;">
            <button type="submit" name="execute" value="false" class="default">Dry-run (ë¯¸ë¦¬ë³´ê¸°)</button>
            <button type="submit" name="execute" value="true" class="deletelink" 
                    onclick="return confirm('ì •ë§ë¡œ ëª¨ë“  ê´€ë¦¬ì ë¡œê·¸ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
                ì‹¤í–‰ (ë¡œê·¸ ì‚­ì œ)
            </button>
        </div>
    </form>
    {% else %}
    <div class="module">
        <h2>ì‹¤í–‰ ê²°ê³¼</h2>
        
        {% for msg_type, message in result.messages %}
        <p class="
            {% if msg_type == 'success' %}success
            {% elif msg_type == 'error' %}errornote
            {% elif msg_type == 'warning' %}warning
            {% else %}help{% endif %}">
            {{ message }}
        </p>
        {% endfor %}
        
        <div style="text-align: center; padding: 30px; background: var(--body-bg); border: 1px solid var(--hairline-color); border-radius: 4px; margin: 20px 0;">
            <div style="font-size: 48px; font-weight: 600;">{{ result.statistics.log_count }}</div>
            <div style="font-size: 16px; opacity: 0.7; margin-top: 10px;">
                {% if request.POST.execute == 'true' %}ì‚­ì œëœ ë¡œê·¸ ìˆ˜{% else %}ì‚­ì œ ì˜ˆì • ë¡œê·¸ ìˆ˜{% endif %}
            </div>
        </div>
        
        <div class="submit-row">
            <a href="{% url 'admin:clean_logs' %}" class="button">ë‹¤ì‹œ ì‹¤í–‰</a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
