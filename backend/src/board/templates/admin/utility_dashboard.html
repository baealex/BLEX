{% extends "admin/base_site.html" %}
{% load static %}

{% block content %}
<div id="content-main">
    <h1>유틸리티 관리</h1>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 20px;">
        <!-- 이미지 정리 -->
        <div class="module">
            <h2>🖼️ 이미지 정리</h2>
            <p>미사용 이미지 파일을 스캔하고 정리합니다.</p>
            <ul>
                <li>컨텐츠/타이틀/아바타 이미지 스캔</li>
                <li>중복 파일 탐지</li>
                <li>빈 디렉토리 정리</li>
            </ul>
            <p><a href="{% url 'admin:clean_images' %}" class="button">시작하기</a></p>
        </div>
        
        <!-- 로그 정리 -->
        <div class="module">
            <h2>📋 로그 정리</h2>
            <p>Django 관리자 로그를 정리합니다.</p>
            <ul>
                <li>관리자 활동 로그 삭제</li>
                <li>데이터베이스 용량 절약</li>
            </ul>
            <p style="margin-top: 41px;"><a href="{% url 'admin:clean_logs' %}" class="button">시작하기</a></p>
        </div>
        
        <!-- 아바타 마이그레이션 -->
        <div class="module">
            <h2>👤 아바타 마이그레이션</h2>
            <p>아바타 이미지를 hex-sharded 구조로 마이그레이션합니다.</p>
            <ul>
                <li>MD5 기반 디렉토리 구조</li>
                <li>자동 경로 업데이트</li>
            </ul>
            <p style="margin-top: 18px;"><a href="{% url 'admin:migrate_avatars' %}" class="button">시작하기</a></p>
        </div>
        
        <!-- 타이틀 이미지 마이그레이션 -->
        <div class="module">
            <h2>🎨 타이틀 이미지 마이그레이션</h2>
            <p>타이틀 이미지를 날짜 기반 구조로 마이그레이션합니다.</p>
            <ul>
                <li>YYYY/M/D 디렉토리 구조</li>
                <li>관련 파일 자동 이동</li>
            </ul>
            <p style="margin-top: 18px;"><a href="{% url 'admin:migrate_titles' %}" class="button">시작하기</a></p>
        </div>
        
        <!-- 중복 포스트 이미지 제거 -->
        <div class="module">
            <h2>🔄 중복 포스트 이미지 제거</h2>
            <p>동일한 내용의 포스트 이미지를 통합하고 중복 파일을 삭제합니다.</p>
            <ul>
                <li>파일 해시 기반 중복 검사</li>
                <li>자동 포스트 업데이트</li>
            </ul>
            <p style="margin-top: 18px;"><a href="{% url 'admin:deduplicate_posts' %}" class="button">시작하기</a></p>
        </div>
        
        <!-- HTML 태그 검증 -->
        <div class="module">
            <h2>🔍 헤딩 태그 검증</h2>
            <p>포스트의 HTML에서 잘못 매칭된 헤딩 태그(h1~h6)를 찾아서 수정합니다.</p>
            <ul>
                <li>헤딩 태그 불일치 검사</li>
                <li>자동 태그 수정</li>
            </ul>
            <p style="margin-top: 18px;"><a href="{% url 'admin:validate_html' %}" class="button">시작하기</a></p>
        </div>
    </div>
    
    <div class="help" style="margin-top: 30px;">
        <h3>⚠️ 주의사항</h3>
        <ul>
            <li>모든 작업은 <strong>Dry-run 모드</strong>를 먼저 실행하여 미리보기를 권장합니다.</li>
            <li>실제 실행 전 백업을 권장합니다.</li>
            <li>대량의 파일 작업 시 시간이 소요될 수 있습니다.</li>
        </ul>
    </div>
</div>
{% endblock %}
