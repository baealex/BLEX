{% comment %}
Post card component
Parameters:
- post: Post object with details (required)
- show_author: Boolean to show/hide author section (default: true)
- author_username: Author username (optional, will use post.author_username if not provided)
{% endcomment %}

{% load static %}
{% load island %}

<div class="post-card">
    {% if post.image %}
        <div class="post-image-container">
            <a href="/@{{ post.author }}/{{ post.url }}">
                <img class="post-image" src="{% static post.image.url %}" alt="{{ post.title }}">
            </a>
        </div>
    {% endif %}
    <div class="post-content">
        {% if show_author != 'false' and show_author != False %}
        <div class="post-author-container">
            <a href="/@{{ post.author }}" class="flex items-center">
                <img class="post-author-image" src="{% static post.author_image %}" alt="{{ post.author }}">
            </a>
            <span class="post-meta">
                <a href="/@{{ post.author }}">{{ post.author }}</a>
                <span class="post-meta-separator">·</span>
                {{ post.created_date }}
            </span>
        </div>
        {% endif %}

        <h3 class="post-title">
            <a href="/@{{ post.author }}/{{ post.url }}">{{ post.title }}</a>
        </h3>

        {% if show_author == 'false' or show_author == False %}
        <div class="post-meta mb-2">
            <i class="far fa-calendar-alt"></i> {{ post.created_date }} 
            <span style="margin: 0 8px;">•</span> 
            <i class="far fa-clock"></i> {{ post.read_time }}분 분량
        </div>
        {% endif %}

        <p class="post-description">{{ post.meta_description }}</p>
        
        <div class="post-footer">
            {% if post.series %}
                <a href="/@{{ post.author }}/series/{{ post.series.url }}">
                    <span class="series-badge">
                        <i class="fas fa-layer-group"></i>
                        <span class="series-badge-name">{{ post.series.name }}</span>
                    </span>
                </a>
            {% else %}
                <div></div>
            {% endif %}
            
            <div class="post-stats">
                <div class="stat-item">
                    <i class="far fa-comment"></i>
                    <span>{{ post.count_comments }}</span>
                </div>
                <div class="stat-item">
                    {% island_component 'LikeButton' postId=post.url likesCount=post.count_likes hasLiked=post.has_liked %}
                </div>
            </div>
        </div>
    </div>
</div>
