{% comment %}
Alpine.js 기반 좋아요 버튼 컴포넌트

매개변수:
- post_url: 포스트 URL (필수)
- likes_count: 좋아요 수 (필수) 
- has_liked: 사용자가 좋아요 했는지 여부 (필수)
- size: 'small' (카드용) 또는 생략 (상세페이지용, 기본값)
{% endcomment %}

<button
    x-data="like_button({
        count: {{ likes_count }},
        liked: {{ has_liked|yesno:'true,false' }},
        postUrl: '{{ post_url }}'
    })"
    @click="handleLike()"
    :class="{
        'text-danger': liked,
        {% if size == 'small' %}
        'bg-danger-surface border-danger-line hover:bg-danger-surface': liked,
        'bg-surface-elevated border-line text-content-hint hover:border-line-strong hover:text-content-secondary hover:bg-surface-subtle': !liked,
        {% else %}
        'text-content-secondary hover:text-content hover:bg-surface-subtle/80': !liked,
        {% endif %}
        'opacity-70 cursor-not-allowed': loading,
        'active:scale-95': !loading
    }"
    :disabled="loading"
    :aria-label="liked ? '좋아요 취소 (' + count + ')' : '좋아요 (' + count + ')'"
    :aria-pressed="liked"
    class="group inline-flex items-center justify-center transition-all duration-300 outline-none cursor-pointer select-none
    {% if size == 'small' %}
        border border-line gap-1.5 px-2.5 py-1 rounded-lg text-xs font-medium h-7 min-w-[51px]
    {% else %}
        gap-2 px-3 py-2 rounded-full font-medium
    {% endif %}">
    <i :class="{
        'fas fa-heart': true,
        'animate-heart-beat': liked && !loading
    }" class="transition-transform duration-300 {% if size == 'small' %}text-xs{% else %}text-sm{% endif %}"></i>
    <span x-text="count" class="{% if size == 'small' %}text-xs{% endif %}"></span>
</button>
