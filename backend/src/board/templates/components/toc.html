<div
    x-data="toc()"
    x-init="init()"
    class="bg-surface rounded-2xl ring-1 ring-line/60 max-h-[400px] overflow-y-auto overscroll-contain"
>
    <!-- Header -->
    <div class="px-6 py-4 border-b border-line-light sticky top-0 bg-surface z-10">
        <h2 class="text-sm font-bold text-content uppercase tracking-wider">
            목차
        </h2>
    </div>

    <!-- ToC List -->
    <nav class="px-4 py-4" aria-label="Table of Contents">
        <ul class="space-y-1">
            {% for heading in table_of_contents %}
                <li>
                    <a
                        href="#{{ heading.id }}"
                        @click.prevent="scrollToHeading('{{ heading.id }}')"
                        :class="{
                            'text-content font-semibold bg-surface-subtle': activeId === '{{ heading.id }}',
                            'text-content-secondary hover:text-content hover:bg-surface-subtle': activeId !== '{{ heading.id }}'
                        }"
                        class="toc-item block py-2 px-3 rounded-lg text-sm transition-all duration-150 active:scale-95 scroll-mt-20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-action/25"
                        data-id="{{ heading.id }}"
                        style="padding-left: calc({{ heading.level }} * 12px - 6px)"
                    >
                        {{ heading.text }}
                    </a>
                </li>
            {% endfor %}
        </ul>
    </nav>
</div>
