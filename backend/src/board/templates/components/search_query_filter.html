{% comment %}
Search query filter component
Parameters:
- placeholder: Placeholder text for the input field (optional, default: '검색어를 입력하세요')
{% endcomment %}

<div x-data="search_query_filter({ query: '{{ request.GET.q|default:'' }}' })">
    <form method="get" class="relative">
        <!-- Preserve other query parameters -->
        {% for key, value in request.GET.items %}
            {% if key != 'q' and key != 'page' %}
                <input type="hidden" name="{{ key }}" value="{{ value }}">
            {% endif %}
        {% endfor %}

        <div class="relative">
            <input
                type="text"
                name="q"
                x-model="query"
                placeholder="{{ placeholder|default:'검색어를 입력하세요' }}"
                class="w-full px-4 py-2.5 pr-10 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-gray-200 focus:border-gray-300 transition-all"
                autocomplete="off"
            >
            <button
                type="button"
                x-show="query.length > 0"
                @click="query = ''; $el.closest('form').submit()"
                class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors"
            >
                <i class="fas fa-times"></i>
            </button>
            <button
                type="submit"
                x-show="query.length === 0"
                class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"
            >
                <i class="fas fa-search"></i>
            </button>
        </div>
    </form>
</div>
