{% comment %}
Search Input Component
Parameters:
- redirect: The URL to redirect to when the form is submitted.
- placeholder: The placeholder text for the search input.
{% endcomment %}

<div class="relative" x-data="{
    searchValue: '{{ request.GET.q|default:'' }}',
    hasQueryParam: '{{ request.GET.q|default:'' }}' !== '',
    clearSearch() {
        this.searchValue = '';
        if (this.hasQueryParam) {
            const url = new URL(window.location);
            url.searchParams.delete('q');
            window.location = url;
        }
    }
}">
    <form method="GET" action="{{ redirect }}" id="searchForm">
        <input 
            type="text" 
            name="q" 
            placeholder="{{ placeholder }}" 
            x-model="searchValue"
            class="w-full px-4 py-2 pr-20 rounded-lg border border-solid border-gray-200 focus:ring-primary-500 focus:border-primary-500 text-sm"
        >
        <button 
            type="button" 
            @click="clearSearch()" 
            x-show="searchValue.length > 0"
            class="absolute right-10 top-0 h-full px-2 text-gray-400 hover:text-red-500 transition-colors duration-200"
        >
            <i class="fas fa-times"></i>
        </button>
        <button type="submit" class="absolute right-0 top-0 h-full px-3 text-gray-400 hover:text-primary-500">
            <i class="fas fa-search"></i>
        </button>
    </form>
</div>
