{% load static %}
{% load island %}
{% load resource %}

<div class="relative overflow-hidden">
    <div class="relative flex flex-col items-center text-center py-8 sm:py-10 md:py-12 px-4 sm:px-6 max-w-4xl mx-auto">
        <div class="relative group mb-5 sm:mb-6">
            {% if author.profile.avatar %}
            <img class="relative w-24 h-24 sm:w-28 sm:h-28 md:w-32 md:h-32 rounded-full object-cover border-2 border-gray-100 shadow-lg transition-all duration-200 group-hover:shadow-xl" src="{{ author.profile.avatar.url }}" alt="{{ author.username }}">
            {% else %}
            <div class="relative w-24 h-24 sm:w-28 sm:h-28 md:w-32 md:h-32 rounded-full border-2 border-gray-100 shadow-lg transition-all duration-200 group-hover:shadow-xl bg-black flex items-center justify-center text-4xl sm:text-6xl font-bold text-white uppercase">
                {{ author.username|slice:':1' }}
            </div>
            {% endif %}
        </div>

        <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-2 sm:mb-3">
            {{ author.username }}
        </h1>

        {% if author.profile.bio %}
        <p class="text-base sm:text-lg text-gray-600 max-w-2xl mx-auto mb-5 sm:mb-6 leading-relaxed px-2">
            {{ author.profile.bio }}
        </p>
        {% endif %}

        {% if author.profile.homepage %}
        <div class="mb-5 sm:mb-6">
            <a href="{{ author.profile.homepage }}" target="_blank"
               class="inline-flex items-center gap-2 px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg
                      text-gray-600 hover:text-gray-900 hover:border-gray-300
                      transition-all duration-200 text-sm font-medium">
                <i class="fas fa-external-link-alt text-xs"></i>
                <span>
                    {% if 'https://' in author.profile.homepage %}
                        {{ author.profile.homepage|slice:"8:"|truncatechars:30 }}
                    {% elif 'http://' in author.profile.homepage %}
                        {{ author.profile.homepage|slice:"7:"|truncatechars:30 }}
                    {% else %}
                        {{ author.profile.homepage|truncatechars:30 }}
                    {% endif %}
                </span>
            </a>
        </div>
        {% endif %}

        {% with author.profile.collect_social as social_links %}
        {% if social_links %}
        <div class="flex gap-1.5 sm:gap-2 flex-wrap justify-center max-w-xs mx-auto">
            {% for social in social_links %}
            <a href="{{ social.value }}" target="_blank"
               class="w-9 h-9 sm:w-10 sm:h-10 rounded-lg bg-gray-50 border border-gray-200
                      flex items-center justify-center text-gray-600
                      hover:bg-gray-100 hover:text-gray-900 hover:border-gray-300
                      transition-all duration-200"
               title="{{ social.name }}">
                {% if social.name|lower == 'github' %}
                    <i class="fab fa-github text-sm"></i>
                {% elif social.name|lower == 'twitter' or social.name|lower == 'x' %}
                    <i class="fab fa-twitter text-sm"></i>
                {% elif social.name|lower == 'facebook' %}
                    <i class="fab fa-facebook-f text-sm"></i>
                {% elif social.name|lower == 'instagram' %}
                    <i class="fab fa-instagram text-sm"></i>
                {% elif social.name|lower == 'linkedin' %}
                    <i class="fab fa-linkedin-in text-sm"></i>
                {% elif social.name|lower == 'youtube' %}
                    <i class="fab fa-youtube text-sm"></i>
                {% elif social.name|lower == 'tiktok' %}
                    <i class="fab fa-tiktok text-sm"></i>
                {% elif social.name|lower == 'discord' %}
                    <i class="fab fa-discord text-sm"></i>
                {% else %}
                    <i class="fas fa-link text-sm"></i>
                {% endif %}
            </a>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}
    </div>
</div>
